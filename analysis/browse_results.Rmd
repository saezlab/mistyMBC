---
title: "browse_results"
author: "Jovan Tanevski"
date: "`r Sys.Date()`"
output: workflowr::wflow_html
editor_options:
  chunk_output_type: console
---

# Setup

Load necessary libraries

```{r setup, message=FALSE}
library(stringr)
library(mistyR)
```

# Output collection

Find the location of the results for all samples

```{r}
outputs <- str_subset(list.dirs("output"), "processed") %>% 
  str_subset("failed", negate = TRUE)
```

Collect the results for all samples, single modality and all replicates

```{r}
misty.results.codex <- collect_results(str_subset(outputs, "codex"))
misty.results.merfish <- collect_results(str_subset(outputs, "merfish"))
# misty.results.exseq <- collect_results(str_subset(outputs, "exseq"))
```

# Plot basic results

Define a basic set of plots

```{r}
plot_basic_misty <- function(misty.results){
  misty.results %>%
    plot_improvement_stats() %>%
    plot_view_contributions() %>%
    plot_interaction_heatmap("intra") %>%
    plot_interaction_heatmap("juxta.15") %>%
    plot_interaction_heatmap("para.100") %>%
    plot_contrast_heatmap("intra", "juxta.15") %>%
    plot_contrast_heatmap("intra", "para.100") %>%
    plot_interaction_communities("intra") %>%
    plot_interaction_communities("juxta.15") %>%
    plot_interaction_communities("para.100")
}
```   

## CODEX

```{r}
plot_basic_misty(misty.results.codex)
```

## MERFISH

```{r}
plot_basic_misty(misty.results.merfish)
```

<!-- ## ExSeq -->

<!-- ```{r} -->
<!-- plot_basic_misty(misty.results.exseq) -->
<!-- ``` -->

